{"version":3,"file":"bundles/51992865a08047e4c1f4/297.js","mappings":"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","sources":["webpack://element-web/./node_modules/matrix-react-sdk/src/async-components/views/dialogs/security/ExportE2eKeysDialog.tsx","webpack://element-web/./node_modules/matrix-react-sdk/src/utils/MegolmExportEncryption.ts"],"names":["Phase","ExportE2eKeysDialog","React","constructor","props","super","_defineProperty","async","ev","preventDefault","this","verifyFieldsBeforeSubmit","unmounted","passphrase","state","passphrase1","startExport","onFinished","phrase","setState","target","value","phase","Edit","errStr","passphrase2","componentWillUnmount","fieldsInDisplayOrder","fieldPassword","fieldPasswordConfirm","invalidFields","field","validate","allowEmpty","push","length","focus","focused","Promise","resolve","then","matrixClient","getCrypto","exportRoomKeysAsJson","k","MegolmExportEncryption","f","blob","Blob","type","FileSaver","catch","e","logger","error","msg","friendlyText","_t","Exporting","render","disableForm","BaseDialog","className","title","onSubmit","onPassphraseFormSubmit","PassphraseField","minScore","label","_td","labelEnterPassword","labelStrongPassword","labelAllowedButUnsafe","onChange","onPassphraseChange","autoFocus","size","disabled","autoComplete","fieldRef","PassphraseConfirmField","password","labelRequired","labelInvalid","onClick","onCancelClick","subtleCrypto","window","crypto","subtle","webkitSubtle","friendlyError","message","cryptoFailMsg","decryptMegolmKeyFile","data","body","fileStr","TextDecoder","decode","Uint8Array","lineStart","lineEnd","indexOf","Error","line","slice","trim","HEADER_LINE","dataStart","undefined","TRAILER_LINE","dataEnd","base64","latin1String","atob","uint8Array","i","charCodeAt","decodeBase64","unpackMegolmKeyFile","brand","SdkConfig","get","ciphertextLength","salt","subarray","iv","iterations","ciphertext","hmac","aesKey","hmacKey","deriveKeys","toVerify","isValid","plaintext","verify","name","decrypt","counter","encryptMegolmKeyFile","options","kdfRounds","kdf_rounds","getRandomValues","encodedData","TextEncoder","encode","encrypt","cipherArray","bodyLength","resultBuffer","idx","set","toSign","sign","hmacArray","LINE_LENGTH","nLines","Math","ceil","lines","Array","o","encodeBase64","join","buffer","packMegolmKeyFile","start","Date","key","keybits","importKey","deriveBits","hash","now","log","getTime","aesProm","hmacProm","all","String","fromCharCode","apply","from","btoa"],"sourceRoot":""}