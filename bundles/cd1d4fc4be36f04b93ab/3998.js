"use strict";(self.webpackChunkelement_web=self.webpackChunkelement_web||[]).push([[3998],{"./node_modules/matrix-react-sdk/src/components/views/location/Marker.tsx":(e,t,o)=>{o.d(t,{A:()=>d});var r=o("./node_modules/react/index.js"),n=o("./node_modules/classnames/index.js"),a=o.n(n),l=o("./node_modules/matrix-react-sdk/res/img/element-icons/location.svg"),s=o("./node_modules/matrix-react-sdk/src/utils/FormattingUtils.ts"),i=o("./node_modules/matrix-react-sdk/src/components/views/avatars/MemberAvatar.tsx");const c=({tooltip:e,children:t})=>{const[o,n]=(0,r.useState)(!1);if(!e)return r.createElement(r.Fragment,null,t);return r.createElement("div",{onMouseEnter:()=>n(!0),onClick:e=>{e.stopPropagation(),n(!o)},onMouseLeave:()=>n(!1)},t,o&&e)},d=r.forwardRef((({id:e,roomMember:t,useMemberColor:o,tooltip:n},d)=>{const m=o&&t?(0,s.yJ)(t.userId):"";return r.createElement("div",{ref:d,id:e,className:a()("mx_Marker",m,{mx_Marker_defaultColor:!m})},r.createElement(c,{tooltip:n},r.createElement("div",{className:"mx_Marker_border"},t?r.createElement(i.A,{member:t,size:"36px",viewUserOnClick:!1,hideTitle:!!n}):r.createElement(l.I,{className:"mx_Marker_icon"}))))}))},"./node_modules/matrix-react-sdk/src/components/views/location/SmartMarker.tsx":(e,t,o)=>{o.r(t),o.d(t,{default:()=>s});var r=o("./node_modules/react/index.js"),n=o("./node_modules/matrix-react-sdk/src/utils/location/index.ts"),a=o("./node_modules/matrix-react-sdk/src/utils/location/map.ts"),l=o("./node_modules/matrix-react-sdk/src/components/views/location/Marker.tsx");const s=({id:e,map:t,geoUri:o,roomMember:s,useMemberColor:i,tooltip:c})=>{const{onElementRef:d}=((e,t)=>{const[o,l]=(0,r.useState)(),s=(0,r.useCallback)((r=>{if(o||!r)return;const s=(0,n.XB)(t);if(s){const t=(0,a.h)(s,r);t.addTo(e),l(t)}}),[o,t,e]);return(0,r.useEffect)((()=>{if(o){const e=(0,n.XB)(t);e&&o.setLngLat({lon:e.longitude,lat:e.latitude})}}),[o,t]),(0,r.useEffect)((()=>()=>{o&&o.remove()}),[o]),{marker:o,onElementRef:s}})(t,o);return r.createElement("span",null,r.createElement(l.A,{ref:d,id:e,roomMember:s,useMemberColor:i,tooltip:c}))}},"./node_modules/matrix-react-sdk/src/utils/location/map.ts":(e,t,o)=>{o.d(t,{h:()=>c,p:()=>i});var r=o("./node_modules/maplibre-gl/dist/maplibre-gl.js"),n=o("./node_modules/matrix-js-sdk/src/logger.ts"),a=o("./node_modules/matrix-react-sdk/src/languageHandler.tsx"),l=o("./node_modules/matrix-react-sdk/src/utils/location/findMapStyleUrl.ts"),s=o("./node_modules/matrix-react-sdk/src/utils/location/LocationShareErrors.ts");const i=(e,t,o,i)=>{try{const c=(0,l.M)(e),d=new r.Map({container:o,style:c,zoom:15,interactive:t,attributionControl:!1,locale:{"AttributionControl.ToggleAttribution":(0,a._t)("location_sharing|toggle_attribution"),"AttributionControl.MapFeedback":(0,a._t)("location_sharing|map_feedback"),"FullscreenControl.Enter":(0,a._t)("action|enter_fullscreen"),"FullscreenControl.Exit":(0,a._t)("action|exit_fullscreeen"),"GeolocateControl.FindMyLocation":(0,a._t)("location_sharing|find_my_location"),"GeolocateControl.LocationNotAvailable":(0,a._t)("location_sharing|location_not_available"),"LogoControl.Title":(0,a._t)("location_sharing|mapbox_logo"),"NavigationControl.ResetBearing":(0,a._t)("location_sharing|reset_bearing"),"NavigationControl.ZoomIn":(0,a._t)("action|zoom_in"),"NavigationControl.ZoomOut":(0,a._t)("action|zoom_out")}});return d.addControl(new r.AttributionControl,"top-right"),d.on("error",(e=>{n.v.error("Failed to load map: check map_style_url in config.json has a valid URL and API key",e.error),null==i||i(new Error(s.$.MapStyleUrlNotReachable))})),d}catch(e){n.v.error("Failed to render map",e);if((null==e?void 0:e.message).includes("Failed to initialize WebGL"))throw new Error(s.$.WebGLNotEnabled);throw e}},c=(e,t)=>new r.Marker({element:t,anchor:"bottom",offset:[0,-1]}).setLngLat({lon:e.longitude,lat:e.latitude})}}]);
//# sourceMappingURL=3998.js.map