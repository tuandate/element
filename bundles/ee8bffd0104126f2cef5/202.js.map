{"version":3,"file":"bundles/ee8bffd0104126f2cef5/202.js","mappings":"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","sources":["webpack://element-web/./node_modules/matrix-react-sdk/src/async-components/views/dialogs/security/ImportE2eKeysDialog.tsx","webpack://element-web/./node_modules/matrix-react-sdk/src/utils/MegolmExportEncryption.ts"],"names":["Phase","ImportE2eKeysDialog","React","constructor","props","super","_defineProperty","createRef","_this$file$current","files","this","file","current","setState","enableSubmit","state","passphrase","length","ev","target","value","onFormChange","_this$file$current2","_this$file$current2$f","preventDefault","startImport","onFinished","phase","Edit","errStr","componentWillUnmount","unmounted","Importing","Promise","resolve","reject","reader","FileReader","onload","e","_e$target","result","Error","onerror","readAsArrayBuffer","readFileAsArrayBuffer","then","arrayBuffer","MegolmExportEncryption","keys","matrixClient","getCrypto","importRoomKeysAsJson","catch","logger","error","msg","friendlyText","_t","render","disableForm","BaseDialog","className","title","onSubmit","onFormSubmit","htmlFor","ref","id","type","autoFocus","onChange","disabled","Field","label","onPassphraseChange","size","onClick","onCancelClick","subtleCrypto","window","crypto","subtle","webkitSubtle","friendlyError","message","cryptoFailMsg","async","decryptMegolmKeyFile","data","password","body","fileStr","TextDecoder","decode","Uint8Array","lineStart","lineEnd","indexOf","line","slice","trim","HEADER_LINE","dataStart","undefined","TRAILER_LINE","dataEnd","base64","latin1String","atob","uint8Array","i","charCodeAt","decodeBase64","unpackMegolmKeyFile","brand","SdkConfig","get","ciphertextLength","salt","subarray","iv","iterations","ciphertext","hmac","aesKey","hmacKey","deriveKeys","toVerify","isValid","plaintext","verify","name","decrypt","counter","encryptMegolmKeyFile","options","kdfRounds","kdf_rounds","getRandomValues","encodedData","TextEncoder","encode","encrypt","cipherArray","bodyLength","resultBuffer","idx","set","toSign","sign","hmacArray","LINE_LENGTH","nLines","Math","ceil","lines","Array","o","encodeBase64","join","buffer","packMegolmKeyFile","start","Date","key","keybits","importKey","deriveBits","hash","now","log","getTime","aesProm","hmacProm","all","String","fromCharCode","apply","from","btoa"],"sourceRoot":""}