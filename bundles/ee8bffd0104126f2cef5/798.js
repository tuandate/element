"use strict";(self.webpackChunkelement_web=self.webpackChunkelement_web||[]).push([[798],{"./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/ComposerContext.ts":(e,t,n)=>{n.d(t,{AP:()=>a,EW:()=>c,Hx:()=>i});var o=n("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=n("./node_modules/react/index.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({selection:{anchorNode:null,anchorOffset:0,focusNode:null,focusOffset:0,isForward:!0}},e)}const c=(0,r.createContext)(a());function i(){return(0,r.useContext)(c)}c.displayName="ComposerContext"},"./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/components/Editor.tsx":(e,t,n)=>{n.d(t,{K:()=>u});var o=n("./node_modules/classnames/index.js"),r=n.n(o),s=n("./node_modules/react/index.js");var a=n("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),c=n("./node_modules/matrix-react-sdk/src/hooks/useFocus.ts"),i=n("./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/ComposerContext.ts");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e){const t=document.getSelection();if(t){const n=t.getRangeAt(0),o=n.startContainer===t.anchorNode&&n.startOffset===t.anchorOffset;e.selection={anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset,isForward:o}}}const u=(0,s.memo)((0,s.forwardRef)((function({disabled:e,placeholder:t,leftComponent:n,rightComponent:o},a){const l=function(e,t){const[n,o]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{if(e.current){const n=e.current,r=new ResizeObserver((e=>{requestAnimationFrame((()=>{var n,r;const s=null===(n=e[0])||void 0===n||null===(r=n.contentBoxSize)||void 0===r?void 0:r[0].blockSize;o(s>=t)}))}));return r.observe(n),()=>r.unobserve(n)}}),[e,t]),n}(a,24),{onFocus:u,onBlur:p,onInput:f}=function(){const e=(0,i.Hx)(),[t,n]=(0,c.A)();(0,s.useEffect)((()=>{function n(){d(e)}return t&&document.addEventListener("selectionchange",n),()=>document.removeEventListener("selectionchange",n)}),[t,e]);const o=(0,s.useCallback)((()=>{d(e)}),[e]);return m(m({},n),{},{onInput:o})}();return s.createElement("div",{className:"mx_WysiwygComposer_Editor","data-is-expanded":l},n,s.createElement("div",{className:"mx_WysiwygComposer_Editor_container"},s.createElement("div",{className:r()("mx_WysiwygComposer_Editor_content",{mx_WysiwygComposer_Editor_content_placeholder:Boolean(t)}),style:{"--placeholder":`"${t}"`},ref:a,contentEditable:!e,role:"textbox","aria-multiline":"true","aria-autocomplete":"list","aria-haspopup":"listbox",dir:"auto","aria-disabled":e,onFocus:u,onBlur:p,onInput:f})),o)})))},"./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/components/WysiwygAutocomplete.tsx":(e,t,n)=>{n.d(t,{W:()=>u});var o=n("./node_modules/react/index.js"),r=n("./node_modules/matrix-js-sdk/src/logger.ts"),s=n("./node_modules/matrix-react-sdk/src/contexts/RoomContext.ts"),a=n("./node_modules/matrix-react-sdk/src/components/views/rooms/Autocomplete.tsx"),c=n("./node_modules/matrix-react-sdk/src/contexts/MatrixClientContext.tsx"),i=n("./node_modules/matrix-react-sdk/src/Avatar.ts");function l(e,t){var n;const o=e.completionId,r=e.completion;let s;return s=o?t.getRoom(o):r.startsWith("#")?t.getRooms().find((e=>e.getCanonicalAlias()===r||e.getAltAliases().includes(r))):t.getRoom(r),null!==(n=s)&&void 0!==n?n:null}function m({url:e,initialLetter:t,id:n=""}){const o=[`--avatar-background: url(${e})`,`--avatar-letter: '${t}'`],r=i.gx(n);return r&&o.push(r),o.join("; ")}function d(e,t,n){const o="â€‹",r=new Map;if("user"===e.type){const t=n.getMember(e.completionId||"");if(!t)return r;const a=t.name||t.userId,c=i.iv(t.userId),l=i._V(t,16,16,"crop");let d=o;var s;if(l===c)d=null!==(s=i.$R(a))&&void 0!==s?s:o;r.set("data-mention-type",e.type),r.set("style",m({url:l,initialLetter:d,id:t.userId}))}else if("room"===e.type){var a;const n=l(e,t),s=e.completion;let u=o,p=i.ze(null!=n?n:null,16,16,"crop");var c,d;if(!p)u=null!==(c=i.$R((null==n?void 0:n.name)||s))&&void 0!==c?c:o,p=i.iv(null!==(d=null==n?void 0:n.roomId)&&void 0!==d?d:s);r.set("data-mention-type",e.type),r.set("style",m({url:p,initialLetter:u,id:null!==(a=null==n?void 0:n.roomId)&&void 0!==a?a:s}))}else if("at-room"===e.type){let t=o,s=i.ze(n,16,16,"crop");var u;if(!s)t=null!==(u=i.$R(n.name))&&void 0!==u?u:o,s=i.iv(n.roomId);r.set("data-mention-type",e.type),r.set("style",m({url:s,initialLetter:t,id:n.roomId}))}return r}const u=(0,o.forwardRef)((({suggestion:e,handleMention:t,handleCommand:n,handleAtRoomMention:i},m)=>{const{room:u}=(0,s.mP)(),p=(0,c.nH)();if(!u)return null;const f=function(e){return e&&e.keyChar?`${e.keyChar}${e.text}`:""}(e);return r.v.log(`## 26037 ## Rendering Autocomplete for WysiwygAutocomplete with query: "${f}"`),o.createElement("div",{className:"mx_WysiwygComposer_AutoCompleteWrapper"},o.createElement(a.A,{ref:m,query:f,onConfirm:function(e){if(void 0!==p&&void 0!==u)switch(e.type){case"command":return void n(e.completion.trim());case"at-room":return void i(d(e,p,u));case"room":case"user":return void("string"==typeof e.href&&t(e.href,function(e,t){return"user"===e.type||"at-room"===e.type?e.completion:"room"===e.type?(null===(n=l(e,t))||void 0===n?void 0:n.name)||e.completion:"";var n}(e,p),d(e,p,u)));default:return}},selection:{start:0,end:0},room:u}))}));u.displayName="WysiwygAutocomplete"},"./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/components/WysiwygComposer.tsx":(e,t,n)=>{n.d(t,{k:()=>Le});var o,r=n("./node_modules/react/index.js"),s=n("./node_modules/@matrix-org/matrix-wysiwyg/dist/matrix-wysiwyg.js"),a=n("./node_modules/classnames/index.js"),c=n.n(a),i=n("./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/components/WysiwygAutocomplete.tsx");function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l.apply(this,arguments)}var m=function(e,t){return r.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16",role:"presentation","aria-hidden":!0,ref:t},e),o||(o=r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4 3a1 1 0 0 1 1-1h3.192C10.093 2 11.5 3.644 11.5 5.5c0 .753-.232 1.472-.634 2.06A3.47 3.47 0 0 1 12.5 10.5c0 1.96-1.626 3.5-3.571 3.5H5a1 1 0 0 1-1-1zm2 1v3h2.192C8.841 7 9.5 6.405 9.5 5.5S8.84 4 8.192 4zm0 5v3h2.929c.894 0 1.571-.698 1.571-1.5S9.823 9 8.929 9z",clipRule:"evenodd"})))},d=(0,r.forwardRef)(m);var u;function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},p.apply(this,arguments)}var f=function(e,t){return r.createElement("svg",p({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16",role:"presentation","aria-hidden":!0,ref:t},e),u||(u=r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"m8.086 3.6-1.805 8.805H4.8a.8.8 0 0 0 0 1.6h4.267a.8.8 0 1 0 0-1.6H7.914L9.719 3.6H11.2a.8.8 0 0 0 0-1.6H6.933a.8.8 0 1 0 0 1.6z",clipRule:"evenodd"})))},v=(0,r.forwardRef)(f);var g;function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},h.apply(this,arguments)}var y=function(e,t){return r.createElement("svg",h({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16",role:"presentation","aria-hidden":!0,ref:t},e),g||(g=r.createElement("path",{fill:"currentColor",d:"M8.193 11.3c2.02-.26 3.474-2.073 3.474-4.107v-4.36a.834.834 0 0 0-1.667 0v4.434c0 1.113-.753 2.126-1.847 2.346a2.33 2.33 0 0 1-2.82-2.28v-4.5a.834.834 0 0 0-1.666 0v4.5c0 2.38 2.086 4.28 4.526 3.967M3 13.333c0 .367.3.667.667.667h8c.366 0 .666-.3.666-.667 0-.366-.3-.666-.666-.666h-8c-.367 0-.667.3-.667.666"})))},_=(0,r.forwardRef)(y);var w;function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},b.apply(this,arguments)}var x=function(e,t){return r.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16",role:"presentation","aria-hidden":!0,ref:t},e),w||(w=r.createElement("path",{fill:"currentColor",d:"M9.932 4.77C9.49 3.88 8.584 3.474 7.582 3.58c-1.549.167-1.956 1.367-1.767 2.147.206.853.883 1.185 2.078 1.49h5.387c.398 0 .72.35.72.782s-.322.782-.72.782H2.72C2.322 8.782 2 8.432 2 8s.322-.783.72-.783h2.183a3.2 3.2 0 0 1-.48-1.091c-.42-1.738.613-3.843 3.017-4.102 1.416-.153 2.97.416 3.758 2.001.19.38.06.855-.29 1.06s-.787.065-.976-.315M10.285 10.087h1.495c.145.784.034 1.62-.413 2.334C10.743 13.417 9.58 14 7.99 14c-2.606 0-3.804-1.61-4.048-2.676-.097-.42.138-.844.524-.949.385-.105.776.15.873.57.074.323.662 1.49 2.65 1.49 1.282 0 1.914-.459 2.187-.895.252-.402.296-.934.109-1.453"})))},E=(0,r.forwardRef)(x);var k;function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},C.apply(this,arguments)}var O=function(e,t){return r.createElement("svg",C({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16",role:"presentation","aria-hidden":!0,ref:t},e),k||(k=r.createElement("path",{fill:"currentColor",d:"M3.146 2.893a.787.787 0 0 0-.686-.885.804.804 0 0 0-.913.664l-.539 3.652a.787.787 0 0 0 .686.886.804.804 0 0 0 .913-.665zM11.223 9.676a.787.787 0 0 0-.686-.886.804.804 0 0 0-.914.665l-.538 3.652a.787.787 0 0 0 .685.885.804.804 0 0 0 .914-.664zM6.212 2.006a.79.79 0 0 1 .705.87l-.014.117a120 120 0 0 1-.177 1.337c-.108.782-.246 1.72-.357 2.258a.807.807 0 0 1-.95.614.784.784 0 0 1-.634-.92c.1-.481.23-1.369.34-2.159a127 127 0 0 0 .174-1.32l.015-.114a.803.803 0 0 1 .898-.683M14.992 9.676a.787.787 0 0 0-.686-.886.804.804 0 0 0-.913.665l-.539 3.652a.787.787 0 0 0 .686.885.804.804 0 0 0 .913-.664z"})))},j=(0,r.forwardRef)(O);var S;function P(){return P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},P.apply(this,arguments)}var N=function(e,t){return r.createElement("svg",P({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16",role:"presentation","aria-hidden":!0,ref:t},e),S||(S=r.createElement("path",{fill:"currentColor",d:"M9.972 3.749a.667.667 0 1 0-1.277-.383l-2.667 8.889a.667.667 0 1 0 1.277.383zM3.982 4.823a.667.667 0 0 0-.939.086L.821 7.575a.67.67 0 0 0 0 .854l2.222 2.666a.667.667 0 1 0 1.025-.853L2.2 8.002l1.867-2.24a.667.667 0 0 0-.086-.939M12.018 4.823a.667.667 0 0 1 .939.086l2.222 2.666a.666.666 0 0 1 0 .854l-2.222 2.666a.667.667 0 1 1-1.025-.853l1.867-2.24-1.867-2.24a.667.667 0 0 1 .086-.939"})))},M=(0,r.forwardRef)(N);var A,R,F=n("./node_modules/matrix-react-sdk/res/img/element-icons/room/composer/link.svg");function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},T.apply(this,arguments)}var B=function(e,t){return r.createElement("svg",T({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16",role:"presentation","aria-hidden":!0,ref:t},e),A||(A=r.createElement("g",{clipPath:"url(#bulleted_list_svg__a)"},r.createElement("path",{fill:"currentColor",d:"M2.667 7c-.554 0-1 .447-1 1s.446 1 1 1c.553 0 1-.447 1-1s-.447-1-1-1m0-4c-.554 0-1 .447-1 1s.446 1 1 1c.553 0 1-.447 1-1s-.447-1-1-1m0 8c-.554 0-1 .453-1 1s.453 1 1 1 1-.453 1-1-.447-1-1-1m2.666 1.667h8c.367 0 .667-.3.667-.667s-.3-.667-.667-.667h-8c-.366 0-.666.3-.666.667s.3.667.666.667m0-4h8c.367 0 .667-.3.667-.667s-.3-.667-.667-.667h-8c-.366 0-.666.3-.666.667s.3.667.666.667M4.667 4c0 .367.3.667.666.667h8c.367 0 .667-.3.667-.667s-.3-.667-.667-.667h-8c-.366 0-.666.3-.666.667"}))),R||(R=r.createElement("defs",null,r.createElement("clipPath",{id:"bulleted_list_svg__a"},r.createElement("path",{fill:"#fff",d:"M0 0h16v16H0z"})))))},I=(0,r.forwardRef)(B);var H,L;function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},D.apply(this,arguments)}var z=function(e,t){return r.createElement("svg",D({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16",role:"presentation","aria-hidden":!0,ref:t},e),H||(H=r.createElement("g",{clipPath:"url(#numbered_list_svg__a)"},r.createElement("path",{fill:"currentColor",d:"M5.333 4.664h8c.367 0 .667-.3.667-.667 0-.366-.3-.666-.667-.666h-8c-.366 0-.666.3-.666.666s.3.667.666.667m8 6.667h-8c-.366 0-.666.3-.666.666s.3.667.666.667h8c.367 0 .667-.3.667-.667 0-.366-.3-.666-.667-.666m0-4h-8c-.366 0-.666.3-.666.666s.3.667.666.667h8c.367 0 .667-.3.667-.667 0-.366-.3-.666-.667-.666M3 10.664H1.667a.33.33 0 0 0-.334.333.33.33 0 0 0 .334.334h1v.333h-.334a.33.33 0 0 0-.333.333.33.33 0 0 0 .333.334h.334v.333h-1a.33.33 0 0 0-.334.333.33.33 0 0 0 .334.334H3a.33.33 0 0 0 .333-.334v-2A.33.33 0 0 0 3 10.664M1.667 3.331H2v1.666a.33.33 0 0 0 .333.334.33.33 0 0 0 .334-.334v-2a.33.33 0 0 0-.334-.333h-.666a.33.33 0 0 0-.334.333.33.33 0 0 0 .334.334M3 6.664H1.667a.33.33 0 0 0-.334.333.33.33 0 0 0 .334.334h.866l-1.12 1.306a.33.33 0 0 0-.08.214v.146a.33.33 0 0 0 .334.334H3a.33.33 0 0 0 .333-.334A.33.33 0 0 0 3 8.664h-.867l1.12-1.307c.054-.06.08-.14.08-.213v-.147A.33.33 0 0 0 3 6.664"}))),L||(L=r.createElement("defs",null,r.createElement("clipPath",{id:"numbered_list_svg__a"},r.createElement("path",{fill:"#fff",d:"M0 0h16v16H0z"})))))},K=(0,r.forwardRef)(z);var W;function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},q.apply(this,arguments)}var $=function(e,t){return r.createElement("svg",q({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16",role:"presentation","aria-hidden":!0,ref:t},e),W||(W=r.createElement("path",{fill:"currentColor",d:"m5.143 7.998 1.333-1.334a.57.57 0 0 0 .172-.419.57.57 0 0 0-.172-.419.57.57 0 0 0-.419-.171.57.57 0 0 0-.419.171L3.867 7.598a.6.6 0 0 0-.134.19.6.6 0 0 0-.038.21.6.6 0 0 0 .038.21.6.6 0 0 0 .134.19l1.79 1.79a.57.57 0 0 0 .42.172.57.57 0 0 0 .418-.172.57.57 0 0 0 .172-.419.57.57 0 0 0-.172-.419zm5.714 0L9.505 9.35a.57.57 0 0 0-.172.42.57.57 0 0 0 .172.418.57.57 0 0 0 .419.172.57.57 0 0 0 .419-.172l1.79-1.79a.6.6 0 0 0 .134-.19.6.6 0 0 0 .038-.21.6.6 0 0 0-.038-.21.6.6 0 0 0-.134-.19l-1.79-1.79a.4.4 0 0 0-.19-.134.7.7 0 0 0-.23-.038.552.552 0 0 0-.42.171.57.57 0 0 0-.17.42.57.57 0 0 0 .172.418zm-8.571 6.857q-.458 0-.8-.343a1.1 1.1 0 0 1-.343-.8V2.283q0-.455.343-.8.342-.342.8-.342h11.428q.458 0 .8.342.343.344.343.8v11.43q0 .456-.343.8a1.1 1.1 0 0 1-.8.342zm0-1.143h11.428V2.283H2.286z"})))},U=(0,r.forwardRef)($);var V,Y;function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},J.apply(this,arguments)}var G=function(e,t){return r.createElement("svg",J({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16",role:"presentation","aria-hidden":!0,ref:t},e),V||(V=r.createElement("g",{clipPath:"url(#indent_increase_svg__a)"},r.createElement("path",{fill:"currentColor",d:"M2.667 14h10.666c.367 0 .667-.3.667-.667 0-.366-.3-.666-.667-.666H2.667c-.367 0-.667.3-.667.666s.3.667.667.667M2 6.14v3.727c0 .3.36.446.567.233l1.86-1.86a.33.33 0 0 0 0-.473L2.567 5.9A.333.333 0 0 0 2 6.14m6 5.193h5.333c.367 0 .667-.3.667-.666S13.7 10 13.333 10H8c-.367 0-.667.3-.667.667 0 .366.3.666.667.666M2 2.667c0 .366.3.666.667.666h10.666c.367 0 .667-.3.667-.666S13.7 2 13.333 2H2.667C2.3 2 2 2.3 2 2.667M8 6h5.333C13.7 6 14 5.7 14 5.333c0-.366-.3-.666-.667-.666H8c-.367 0-.667.3-.667.666S7.633 6 8 6m0 2.667h5.333c.367 0 .667-.3.667-.667s-.3-.667-.667-.667H8c-.367 0-.667.3-.667.667s.3.667.667.667"}))),Y||(Y=r.createElement("defs",null,r.createElement("clipPath",{id:"indent_increase_svg__a"},r.createElement("path",{fill:"#fff",d:"M0 0h16v16H0z"})))))},Q=(0,r.forwardRef)(G);var X,Z;function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ee.apply(this,arguments)}var te=function(e,t){return r.createElement("svg",ee({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16",role:"presentation","aria-hidden":!0,ref:t},e),X||(X=r.createElement("g",{clipPath:"url(#indent_decrease_svg__a)"},r.createElement("path",{fill:"currentColor",d:"M8 11.333h5.333c.367 0 .667-.3.667-.666S13.7 10 13.333 10H8c-.367 0-.667.3-.667.667 0 .366.3.666.667.666m-5.767-3.1 1.86 1.86a.334.334 0 0 0 .574-.233V6.14a.33.33 0 0 0-.567-.233l-1.86 1.86a.33.33 0 0 0-.007.466M2.667 14h10.666c.367 0 .667-.3.667-.667 0-.366-.3-.666-.667-.666H2.667c-.367 0-.667.3-.667.666s.3.667.667.667M2 2.667c0 .366.3.666.667.666h10.666c.367 0 .667-.3.667-.666S13.7 2 13.333 2H2.667C2.3 2 2 2.3 2 2.667M8 6h5.333C13.7 6 14 5.7 14 5.333c0-.366-.3-.666-.667-.666H8c-.367 0-.667.3-.667.666S7.633 6 8 6m0 2.667h5.333c.367 0 .667-.3.667-.667s-.3-.667-.667-.667H8c-.367 0-.667.3-.667.667s.3.667.667.667"}))),Z||(Z=r.createElement("defs",null,r.createElement("clipPath",{id:"indent_decrease_svg__a"},r.createElement("path",{fill:"#fff",d:"M0 0h16v16H0z"})))))},ne=(0,r.forwardRef)(te);var oe=n("./node_modules/matrix-react-sdk/src/components/views/elements/AccessibleTooltipButton.tsx"),re=n("./node_modules/matrix-react-sdk/src/components/views/elements/Tooltip.tsx"),se=n("./node_modules/matrix-react-sdk/src/components/views/settings/KeyboardShortcut.tsx"),ae=n("./node_modules/matrix-react-sdk/src/languageHandler.tsx"),ce=n("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),ie=n("./node_modules/matrix-react-sdk/src/Modal.tsx"),le=n("./node_modules/matrix-react-sdk/src/components/views/elements/Field.tsx"),me=n("./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/selection.ts"),de=n("./node_modules/matrix-react-sdk/src/components/views/dialogs/BaseDialog.tsx"),ue=n("./node_modules/matrix-react-sdk/src/components/views/elements/DialogButtons.tsx");function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){(0,ce.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ve(e){return e.length<1}const ge=({composer:e,isTextEnabled:t,onFinished:n,composerContext:o,isEditing:s})=>{const[a,c]=(0,r.useState)(!1),[i,l]=(0,r.useState)({text:"",link:s?e.getLink():""}),m=!s&&t,d=!a||m&&ve(i.text)||ve(i.link);return r.createElement(de.A,{className:"mx_LinkModal",title:s?(0,ae._t)("composer|link_modal|title_edit"):(0,ae._t)("composer|link_modal|title_create"),hasCancel:!0,onFinished:n},r.createElement("form",{className:"mx_LinkModal_content",onSubmit:async r=>{r.preventDefault(),r.stopPropagation(),n(),await new Promise((e=>setTimeout(e,0))),await(0,me.td)(o.selection),e.link(i.link,t?i.text:void 0)}},m&&r.createElement(le.A,{required:!0,autoFocus:!0,label:(0,ae._t)("composer|link_modal|text_field_label"),value:i.text,className:"mx_LinkModal_Field",placeholder:"",onChange:e=>l((t=>fe(fe({},t),{},{text:e.target.value})))}),r.createElement(le.A,{required:!0,autoFocus:!m,label:(0,ae._t)("composer|link_modal|link_field_label"),value:i.link,className:"mx_LinkModal_Field",placeholder:"",onChange:e=>{l((t=>fe(fe({},t),{},{link:e.target.value}))),c(!0)}}),r.createElement("div",{className:"mx_LinkModal_buttons"},s&&r.createElement("button",{type:"button",className:"danger",onClick:()=>{e.removeLinks(),n()}},(0,ae._t)("action|remove")),r.createElement(ue.A,{primaryButton:(0,ae._t)("action|save"),primaryDisabled:d,primaryIsSubmit:!0,onCancel:n}))))};var he=n("./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/ComposerContext.ts");function ye({label:e,keyCombo:t}){return r.createElement("div",{className:"mx_FormattingButtons_Tooltip"},e,t&&r.createElement(se.S,{value:t,className:"mx_FormattingButtons_Tooltip_KeyboardShortcut"}))}function _e({label:e,keyCombo:t,onClick:n,actionState:o,icon:s}){return r.createElement(oe.A,{element:"button",onClick:n,title:e,className:c()("mx_FormattingButtons_Button",{mx_FormattingButtons_active:"reversed"===o,mx_FormattingButtons_Button_hover:"enabled"===o,mx_FormattingButtons_disabled:"disabled"===o}),tooltip:t&&r.createElement(ye,{label:e,keyCombo:t}),forceHide:"disabled"===o,alignment:re.C.Top},s)}function we({composer:e,actionStates:t}){const n=(0,he.Hx)(),o="reversed"===t.unorderedList||"reversed"===t.orderedList;return r.createElement("div",{className:"mx_FormattingButtons"},r.createElement(_e,{actionState:t.bold,label:(0,ae._t)("composer|format_bold"),keyCombo:{ctrlOrCmdKey:!0,key:"b"},onClick:()=>e.bold(),icon:r.createElement(d,{className:"mx_FormattingButtons_Icon"})}),r.createElement(_e,{actionState:t.italic,label:(0,ae._t)("composer|format_italic"),keyCombo:{ctrlOrCmdKey:!0,key:"i"},onClick:()=>e.italic(),icon:r.createElement(v,{className:"mx_FormattingButtons_Icon"})}),r.createElement(_e,{actionState:t.underline,label:(0,ae._t)("composer|format_underline"),keyCombo:{ctrlOrCmdKey:!0,key:"u"},onClick:()=>e.underline(),icon:r.createElement(_,{className:"mx_FormattingButtons_Icon"})}),r.createElement(_e,{actionState:t.strikeThrough,label:(0,ae._t)("composer|format_strikethrough"),onClick:()=>e.strikeThrough(),icon:r.createElement(E,{className:"mx_FormattingButtons_Icon"})}),r.createElement(_e,{actionState:t.unorderedList,label:(0,ae._t)("composer|format_unordered_list"),onClick:()=>e.unorderedList(),icon:r.createElement(I,{className:"mx_FormattingButtons_Icon"})}),r.createElement(_e,{actionState:t.orderedList,label:(0,ae._t)("composer|format_ordered_list"),onClick:()=>e.orderedList(),icon:r.createElement(K,{className:"mx_FormattingButtons_Icon"})}),o&&r.createElement(_e,{actionState:t.indent,label:(0,ae._t)("composer|format_increase_indent"),onClick:()=>e.indent(),icon:r.createElement(Q,{className:"mx_FormattingButtons_Icon"})}),o&&r.createElement(_e,{actionState:t.unindent,label:(0,ae._t)("composer|format_decrease_indent"),onClick:()=>e.unindent(),icon:r.createElement(ne,{className:"mx_FormattingButtons_Icon"})}),r.createElement(_e,{actionState:t.quote,label:(0,ae._t)("action|quote"),onClick:()=>e.quote(),icon:r.createElement(j,{className:"mx_FormattingButtons_Icon"})}),r.createElement(_e,{actionState:t.inlineCode,label:(0,ae._t)("composer|format_inline_code"),keyCombo:{ctrlOrCmdKey:!0,key:"e"},onClick:()=>e.inlineCode(),icon:r.createElement(M,{className:"mx_FormattingButtons_Icon"})}),r.createElement(_e,{actionState:t.codeBlock,label:(0,ae._t)("composer|format_code_block"),onClick:()=>e.codeBlock(),icon:r.createElement(U,{className:"mx_FormattingButtons_Icon"})}),r.createElement(_e,{actionState:t.link,label:(0,ae._t)("composer|format_link"),onClick:()=>function(e,t,n){ie.Ay.createDialog(ge,{composerContext:t,composer:e,isTextEnabled:(0,me.CD)(),isEditing:n},"mx_CompoundDialog",!1,!0)}(e,n,"reversed"===t.link),icon:r.createElement(F.I,{className:"mx_FormattingButtons_Icon"})}))}var be=n("./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/components/Editor.tsx"),xe=n("./node_modules/matrix-react-sdk/src/hooks/useSettings.ts"),Ee=n("./node_modules/matrix-react-sdk/src/KeyBindingsManager.ts"),ke=n("./node_modules/matrix-react-sdk/src/accessibility/KeyboardShortcuts.ts"),Ce=n("./node_modules/matrix-react-sdk/src/utils/EventUtils.ts"),Oe=n("./node_modules/matrix-react-sdk/src/dispatcher/dispatcher.ts"),je=n("./node_modules/matrix-react-sdk/src/dispatcher/actions.ts"),Se=n("./node_modules/matrix-react-sdk/src/contexts/RoomContext.ts"),Pe=n("./node_modules/matrix-react-sdk/src/contexts/MatrixClientContext.tsx"),Ne=n("./node_modules/matrix-js-sdk/src/matrix.ts");var Me=n("./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/editing.ts"),Ae=n("./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/utils.ts");function Re(e,t,n,o){const s=(0,Se.mP)(),a=(0,he.Hx)(),c=(0,Pe.nH)(),i=(0,xe.t)("MessageComposerInput.ctrlEnterToSend");return(0,r.useCallback)(((r,l,m)=>{const d=()=>{var n,o;null===(n=r.stopPropagation)||void 0===n||n.call(r),null===(o=r.preventDefault)||void 0===o||o.call(r),null!=t&&t.current&&!t.current.state.hide||e()};if((0,Ae.wg)(r)){const e=r instanceof ClipboardEvent?r.clipboardData:r.dataTransfer;return(0,Ae.VI)(r,e,s,c,o)?null:r}return r instanceof KeyboardEvent?function(e,t,n,o,r,s,a,c,i){const{editorStateTransfer:l}=a,m=Boolean(l)?n!==o.content():0!==o.content().length,d=(0,Ee.zM)().getMessageComposerAction(e),u=(0,Ae.hi)(i,e);if(u)return e;if(void 0===c)return null;switch(d){case ke.bY.SendMessage:return t(),null;case ke.bY.EditPrevMessage:if(!(0,me.tJ)(r)||m)break;if(Fe(e,!1,l,a,s,c))return null;break;case ke.bY.EditNextMessage:if(!l||!(0,me.uJ)(r)||m)break;return Fe(e,!0,l,a,s,c)||((0,Me.w)(s),e.preventDefault(),e.stopPropagation()),null}return e}(r,d,n,l,m,s,a,c,t):function(e,t,n){switch(e.inputType){case"insertParagraph":if(!n)return t(),null;break;case"sendMessage":if(n)return t(),null}return e}(r,d,i)}),[i,e,n,s,a,c,t,o])}function Fe(e,t,n,o,r,s){const a=n?function(e,t,n){var o;const r=null===(o=t.liveTimeline)||void 0===o?void 0:o.getEvents();if(!r)return;const s=e.getEvent().getRoomId();if(!s)return;const a=n.getRoom(s);if(!a)return;const c=a.getPendingEvents(),i=Boolean(e.getEvent().getThread());return r.concat(i?[]:c)}(n,r,s):function(e,t){var n,o,r;const s=(null===(n=e.eventRelation)||void 0===n?void 0:n.key)===Ne.THREAD_RELATION_TYPE.name;return null===(o=t.liveTimeline)||void 0===o?void 0:o.getEvents().concat(s?[]:(null===(r=t.room)||void 0===r?void 0:r.getPendingEvents())||[])}(o,r);if(!a)return!1;const c=(0,Ce.Iy)({events:a,isForward:t,fromEventId:null==n?void 0:n.getEvent().getId(),matrixClient:s});return!!c&&(Oe.Ay.dispatch({action:je.r.EditEvent,event:c,timelineRenderingType:r.timelineRenderingType}),e.stopPropagation(),e.preventDefault(),!0)}var Te=n("./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useSetCursorPosition.ts"),Be=n("./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useIsFocused.ts"),Ie=n("./node_modules/matrix-react-sdk/src/utils/permalinks/Permalinks.ts"),He=n("./node_modules/matrix-react-sdk/src/Typeguards.ts");const Le=(0,r.memo)((function({disabled:e=!1,onChange:t,onSend:n,placeholder:o,initialContent:a,className:l,leftComponent:m,rightComponent:d,children:u,eventRelation:p}){const{room:f}=(0,Se.mP)(),v=(0,r.useRef)(null),g=Re(n,v,a,p),{ref:h,isWysiwygReady:y,content:_,actionStates:w,wysiwyg:b,suggestion:x,messageContent:E}=(0,s.useWysiwyg)({initialContent:a,inputEventProcessor:g}),{isFocused:k,onFocus:C}=(0,Be.j)(),O=y&&!e,j=!_&&o||void 0;return(0,Te.V)(!O,h),(0,r.useEffect)((()=>{!e&&(0,He.P)(E)&&t(E)}),[t,E,e]),(0,r.useEffect)((()=>{var e;function t(e){if(e.preventDefault(),e.target&&e.target instanceof HTMLAnchorElement&&"user"===e.target.getAttribute("data-mention-type")){const t=(0,Ie.$N)(e.target.href);f&&null!=t&&t.userId&&Oe.Ay.dispatch({action:je.r.ViewUser,member:f.getMember(t.userId)})}}const n=null===(e=h.current)||void 0===e?void 0:e.querySelectorAll("a[data-mention-type]");return n&&n.forEach((e=>e.addEventListener("click",t))),()=>{n&&n.forEach((e=>e.removeEventListener("click",t)))}}),[h,f,_]),r.createElement("div",{className:c()(l,{[`${l}-focused`]:k}),onFocus:C,onBlur:C},r.createElement(i.W,{ref:v,suggestion:x,handleMention:b.mention,handleAtRoomMention:b.mentionAtRoom,handleCommand:b.command}),r.createElement(we,{composer:b,actionStates:w}),r.createElement(be.K,{ref:h,disabled:!O,leftComponent:m,rightComponent:d,placeholder:j}),null==u?void 0:u(h,b))}))},"./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useIsFocused.ts":(e,t,n)=>{n.d(t,{j:()=>r});var o=n("./node_modules/react/index.js");function r(){const[e,t]=(0,o.useState)(!1),n=(0,o.useRef)();(0,o.useEffect)((()=>()=>clearTimeout(n.current)),[n]);return{isFocused:e,onFocus:(0,o.useCallback)((e=>{clearTimeout(n.current),"focus"===e.type?t(!0):n.current=window.setTimeout((()=>t(!1)),100)}),[t,n])}}},"./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useSetCursorPosition.ts":(e,t,n)=>{n.d(t,{V:()=>s});var o=n("./node_modules/react/index.js"),r=n("./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/utils.ts");function s(e,t){(0,o.useEffect)((()=>{t.current&&!e&&(0,r.bC)(t.current)}),[t,e])}},"./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/utils.ts":(e,t,n)=>{n.d(t,{Hj:()=>i,VI:()=>d,bC:()=>l,hi:()=>m,wg:()=>u});var o=n("./node_modules/matrix-react-sdk/src/KeyBindingsManager.ts"),r=n("./node_modules/matrix-react-sdk/src/accessibility/KeyboardShortcuts.ts"),s=n("./node_modules/matrix-react-sdk/src/utils/blobs.ts"),a=n("./node_modules/matrix-react-sdk/src/ContentMessages.ts"),c=n("./node_modules/matrix-react-sdk/src/Typeguards.ts");function i(e,t,n,o){var r;t===n.timelineRenderingType&&(null===(r=e.current)||void 0===r||r.focus(),o.current&&clearTimeout(o.current),o.current=window.setTimeout((()=>{var t;return null===(t=e.current)||void 0===t?void 0:t.focus()}),200))}function l(e){const t=document.createRange();t.selectNodeContents(e),t.collapse(!1);const n=document.getSelection();n.removeAllRanges(),n.addRange(t),e.focus()}function m(e,t){if(!((null==e?void 0:e.current)&&!e.current.state.hide))return!1;let n=!1;const s=(0,o.zM)().getAutocompleteAction(t),a=e.current;if(a&&a.countCompletions()>0)switch(s){case r.bY.ForceCompleteAutocomplete:case r.bY.CompleteAutocomplete:e.current.onConfirmCompletion(),n=!0;break;case r.bY.PrevSelectionInAutocomplete:e.current.moveSelection(-1),n=!0;break;case r.bY.NextSelectionInAutocomplete:e.current.moveSelection(1),n=!0;break;case r.bY.CancelAutocomplete:e.current.onEscape(t),n=!0}return n&&(t.preventDefault(),t.stopPropagation()),n}function d(e,t,n,o,r){const{room:c,timelineRenderingType:i,replyToEvent:l}=n;function m(e){e instanceof Error?console.log(e.message):"string"==typeof e&&console.log(e)}if("paste"!==e.type||null===t||void 0===c)return!1;if(t.files.length&&!t.types.includes("text/rtf"))return a.Ay.sharedInstance().sendContentListToRoom(Array.from(t.files),c.roomId,r,o,i).catch(m),!0;if(t.types.includes("text/html")){var d;const e=t.getData("text/html"),n=(new DOMParser).parseFromString(e,"text/html");if(1!==n.getElementsByTagName("img").length||null===(d=n.querySelector("img"))||void 0===d||!d.src.startsWith("blob:")||1!==n.childNodes.length)return m("Failed to handle pasted content as Safari inserted content"),!1;const i=n.querySelector("img").src;return fetch(i).then((e=>{e.blob().then((t=>{const n=t.type,i=(0,s.F)(n),d=n.split("/")[1],u=e.url.split("/"),p=u[u.length-1],f=new File([t],p+"."+d,{type:i});a.Ay.sharedInstance().sendContentToRoom(f,c.roomId,r,o,l).catch(m)})).catch(m)})).catch(m),!0}return!1}function u(e){const t=e instanceof InputEvent&&"insertFromPaste"===e.inputType&&(0,c.P)(e.dataTransfer);return e instanceof ClipboardEvent||t}},"./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/editing.ts":(e,t,n)=>{n.d(t,{r:()=>c,w:()=>a});var o=n("./node_modules/matrix-js-sdk/src/matrix.ts"),r=n("./node_modules/matrix-react-sdk/src/dispatcher/dispatcher.ts"),s=n("./node_modules/matrix-react-sdk/src/dispatcher/actions.ts");function a(e){r.Ay.dispatch({action:s.r.EditEvent,event:null,timelineRenderingType:e.timelineRenderingType}),r.Ay.dispatch({action:s.r.FocusSendMessageComposer,context:e.timelineRenderingType})}function c(e,t){const n=t.getEvent().replacingEvent();!n||n.status!==o.EventStatus.QUEUED&&n.status!==o.EventStatus.NOT_SENT||e.cancelPendingEvent(n)}},"./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/selection.ts":(e,t,n)=>{function o(e){if(e.anchorNode&&e.focusNode){var t,n;const o=new Range;e.isForward?(o.setStart(e.anchorNode,e.anchorOffset),o.setEnd(e.focusNode,e.focusOffset)):(o.setStart(e.focusNode,e.focusOffset),o.setEnd(e.anchorNode,e.anchorOffset)),null===(t=document.getSelection())||void 0===t||t.removeAllRanges(),null===(n=document.getSelection())||void 0===n||n.addRange(o)}return new Promise((e=>setTimeout(e,0)))}function r(){const e=document.getSelection();return Boolean(null==e?void 0:e.isCollapsed)}function s(e){const t=document.getSelection();if(!t)return!1;if(t.anchorNode===e&&t.anchorOffset<=1)return!0;let n=e.firstChild;do{var o;if(n===t.anchorNode)return 0===t.anchorOffset}while(n=(null===(o=n)||void 0===o?void 0:o.firstChild)||null);return!1}function a(e){var t;const n=document.getSelection();if(!n)return!1;if(n.focusNode===e&&n.focusOffset===(null===(t=e.childNodes)||void 0===t?void 0:t.length))return!0;let o=e.childNodes.item(e.childNodes.length-2);do{var r;if(o===n.focusNode)return n.focusOffset===(null===(r=o.textContent)||void 0===r?void 0:r.length)}while(o=o.lastChild);return!1}n.d(t,{CD:()=>r,tJ:()=>s,td:()=>o,uJ:()=>a})},"./node_modules/matrix-react-sdk/src/components/views/settings/KeyboardShortcut.tsx":(e,t,n)=>{n.d(t,{S:()=>i});var o=n("./node_modules/react/index.js"),r=n("./node_modules/matrix-react-sdk/src/accessibility/KeyboardShortcuts.ts"),s=n("./node_modules/matrix-react-sdk/src/Keyboard.ts"),a=n("./node_modules/matrix-react-sdk/src/languageHandler.tsx");const c=({name:e,last:t})=>{const n=r.GA[e],s=r.hm[e];return o.createElement(o.Fragment,null,o.createElement("kbd",null," ",n||s&&(0,a._t)(s)||e," "),!t&&"+")},i=({value:e,className:t="mx_KeyboardShortcut"})=>{if(!e)return null;const n=[];return e.ctrlOrCmdKey?n.push(o.createElement(c,{key:"ctrlOrCmdKey",name:s.vL?s.Uz.META:s.Uz.CONTROL})):e.ctrlKey?n.push(o.createElement(c,{key:"ctrlKey",name:s.Uz.CONTROL})):e.metaKey&&n.push(o.createElement(c,{key:"metaKey",name:s.Uz.META})),e.altKey&&n.push(o.createElement(c,{key:"altKey",name:s.Uz.ALT})),e.shiftKey&&n.push(o.createElement(c,{key:"shiftKey",name:s.Uz.SHIFT})),o.createElement("div",{className:t},n,o.createElement(c,{name:e.key,last:!0}))}}}]);
//# sourceMappingURL=798.js.map